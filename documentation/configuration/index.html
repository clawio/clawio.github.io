<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">

    <title>
      Configuration &middot; ClawIO
    </title>

    <link rel="stylesheet" href="/docs.css">

    <!-- Favicons -->
    <link rel="apple-touch-icon-precomposed" href="/img/icon.png">
    <link rel="icon" href="/favicon.ico">
  </head>
  <body>

    <header class="masthead">
      <div class="container">
        <a href="/" class="masthead-logo">
          <!--<span class="mega-octicon octicon-package"></span>-->
          <img src="/img/icon.png" height="33px" width="150px">
        </a>

        <nav class="masthead-nav">
          <a  href="/manifesto">Manifesto</a>
          <a  href="/documentation/">Documentation</a>
          <a href="https://github.com/clawio/clawio" target="_blank">GitHub</a>
        </nav>
      </div>
    </header>

    

    <div class="container">
      <div class="columns docs-layout">
  <div class="four-fifths column markdown-body">
    <h1 class="page-title">
      Configuration
    </h1>
    <div class="markdown-body">
      <p>The configuration of ClawIO resides in a central configuration file that is used by <code>clawiod</code> to set up the server.
You can specify the configuration file passing the <code>--config</code> flag (<code>clawiod --config /tmp/other_config.conf</code>) or the daemon will take the one at <code>/etc/clawiod/clawiod.conf</code> or <code>/etc/sysconfig/clawiod.conf</code> depending on your OS.</p>

<h1 id="directives">Directives</h1>

<ul id="markdown-toc">
  <li><a href="#directives" id="markdown-toc-directives">Directives</a></li>
  <li><a href="#port" id="markdown-toc-port">port</a></li>
  <li><a href="#tlsenbaled" id="markdown-toc-tlsenbaled">tls_enbaled</a></li>
  <li><a href="#tlscertificate" id="markdown-toc-tlscertificate">tls_certificate</a></li>
  <li><a href="#tlscertificateprivatekey" id="markdown-toc-tlscertificateprivatekey">tls_certificate_private_key</a></li>
  <li><a href="#shutdowntimeout" id="markdown-toc-shutdowntimeout">shutdown_timeout</a></li>
  <li><a href="#maintenance" id="markdown-toc-maintenance">maintenance</a></li>
  <li><a href="#maintenancemessage" id="markdown-toc-maintenancemessage">maintenance_message</a></li>
  <li><a href="#logappfile" id="markdown-toc-logappfile">log_app_file</a></li>
  <li><a href="#logrequests" id="markdown-toc-logrequests">log_requests</a></li>
  <li><a href="#logreqfile" id="markdown-toc-logreqfile">log_req_file</a></li>
  <li><a href="#loglevel" id="markdown-toc-loglevel">log_level</a></li>
  <li><a href="#tokensecret" id="markdown-toc-tokensecret">token_secret</a></li>
  <li><a href="#tokenciphersuite" id="markdown-toc-tokenciphersuite">token_cipher_suite</a></li>
  <li><a href="#tokenexpirationtime" id="markdown-toc-tokenexpirationtime">token_expiration_time</a></li>
  <li><a href="#authtokenheadername" id="markdown-toc-authtokenheadername">auth_token_header_name</a></li>
  <li><a href="#authtokenqueryparamname" id="markdown-toc-authtokenqueryparamname">auth_token_query_param_name</a></li>
  <li><a href="#checksumheadername" id="markdown-toc-checksumheadername">checksum_header_name</a></li>
  <li><a href="#checksumqueryparamname" id="markdown-toc-checksumqueryparamname">checksum_query_param_name</a></li>
  <li><a href="#localstorageprefix" id="markdown-toc-localstorageprefix">local_storage_prefix</a></li>
  <li><a href="#localstoragerootdatadir" id="markdown-toc-localstoragerootdatadir">local_storage_root_data_dir</a></li>
  <li><a href="#localstorageroottmpdir" id="markdown-toc-localstorageroottmpdir">local_storage_root_tmp_dir</a></li>
  <li><a href="#fileauthauthid" id="markdown-toc-fileauthauthid">file_auth_auth_id</a></li>
  <li><a href="#fileauthfilename" id="markdown-toc-fileauthfilename">file_auth_filename</a></li>
  <li><a href="#apiroot" id="markdown-toc-apiroot">api_root</a></li>
  <li><a href="#authapienabled" id="markdown-toc-authapienabled">auth_api_enabled</a></li>
  <li><a href="#authapiid" id="markdown-toc-authapiid">auth_api_id</a></li>
  <li><a href="#storageapienabled" id="markdown-toc-storageapienabled">storage_api_enabled</a></li>
  <li><a href="#storageapiid" id="markdown-toc-storageapiid">storage_api_id</a></li>
  <li><a href="#webdavapienabled" id="markdown-toc-webdavapienabled">webdav_api_enabled</a></li>
  <li><a href="#webdavapiid" id="markdown-toc-webdavapiid">webdav_api_id</a></li>
  <li><a href="#staticapienabled" id="markdown-toc-staticapienabled">static_api_enabled</a></li>
  <li><a href="#staticapiid" id="markdown-toc-staticapiid">static_api_id</a></li>
  <li><a href="#staticapiwithauthentication" id="markdown-toc-staticapiwithauthentication">static_api_with_authentication</a></li>
</ul>

<h1 id="port">port</h1>

<ul>
  <li>Type: number</li>
  <li>Description: The port the server will listen for requests.</li>
  <li>Default: <code>57008</code></li>
</ul>

<p><strong>To listen in privileged ports (&lt;1024) you have three options:</strong></p>

<ol>
  <li>Execute <code>clawiod</code> as <code>sudo</code> (<code>sudo clawiod --config /etc/clawiod/clawiod.conf</code>): <strong>THIS IS NOT RECOMMENDED. JUST USE THIS ALTERNATIVE ONLY FOR TESTING PURPOSES</strong></li>
  <li>Use Linux capabilities: <code>sudo setcap cap_net_bind_service=+ep /usr/bin/clawiod</code>. This sets an extended attribute in the binary so unprivileged users can listen in privileged ports.</li>
  <li>Use a reverse proxy: Configure a reverse proxy like NGINX or Apache to listen in privileged ports to forward the requests to <code>clawiod</code> that is listening in unprivileged ports. <strong>THIS IS THE RECOMMEND SETUP AS THE REVERSE PROXY GIVES MUCH MORE FLEXIBILITY</strong></li>
</ol>

<h1 id="tlsenbaled">tls_enbaled</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: When true enables HTTPS to have secure communications.</li>
  <li>Default: <code>false</code></li>
</ul>

<h1 id="tlscertificate">tls_certificate</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The location of the certificate for HTTPS communication.</li>
  <li>Default: <code>/etc/clawiod/conf.d./certificate.pem</code></li>
</ul>

<p><strong>THE DEFAULT CERTIFICATE AND PRIVATE KEY MUST BE USED ONLY FOR TESTING PURPOSES, A REAL CERTIFICATE GENERATED BY YOU IS NEEDED FOR SECURE THE CONNECTION</strong></p>

<h1 id="tlscertificateprivatekey">tls_certificate_private_key</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The location of the private key used to encrypt the communication with the server.</li>
  <li>Default: <code>/etc/clawiod/conf.d/key.pem</code></li>
</ul>

<p><strong>THE DEFAULT CERTIFICATE AND PRIVATE KEY MUST BE USED ONLY FOR TESTING PURPOSES, A REAL CERTIFICATE GENERATED BY YOU IS NEEDED FOR SECURE THE CONNECTION</strong></p>

<h1 id="shutdowntimeout">shutdown_timeout</h1>

<ul>
  <li>Type: number</li>
  <li>Description: The number of seconds to wait for ongoing requests when a graceful shutdown is triggered.</li>
  <li>Default: <code>30</code></li>
</ul>

<h1 id="maintenance">maintenance</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: When true puts the server in maitenance mode. All requests will receive 503 Service Unavailable error.</li>
  <li>Default: <code>false</code></li>
</ul>

<h1 id="maintenancemessage">maintenance_message</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The message to inform users when server enters maintenance mode.</li>
  <li>Default: <code>Server temporary unavailable due to maintenance tasks</code></li>
</ul>

<h1 id="logappfile">log_app_file</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The location of the file to write application logs.</li>
  <li>Default: <code>/var/log/clawiod/app.log</code></li>
</ul>

<h1 id="logrequests">log_requests</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: When true puts logs Apache-alike requests logs.</li>
  <li>Default: <code>true</code></li>
</ul>

<h1 id="logreqfile">log_req_file</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The location of the file to write Apache-alike logs.</li>
  <li>Default: <code>/var/log/clawiod/req.log</code></li>
</ul>

<h1 id="loglevel">log_level</h1>

<ul>
  <li>Type: number</li>
  <li>Description: The level of the log.</li>
  <li>Default: <code>2</code></li>
</ul>

<table>
  <thead>
    <tr>
      <th>Number</th>
      <th>Meaning</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>Error</td>
    </tr>
    <tr>
      <td>1</td>
      <td>Warning</td>
    </tr>
    <tr>
      <td>2</td>
      <td>Info</td>
    </tr>
    <tr>
      <td>3</td>
      <td>Debug</td>
    </tr>
  </tbody>
</table>

<h1 id="tokensecret">token_secret</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The secret to sign the authentication token.</li>
  <li>Default: <code>mysecret</code></li>
</ul>

<p><strong>THE DEFAULT SECRET MUST BE CHANGED TO AVOID SECURITY PROBLEMS</strong></p>

<h1 id="tokenciphersuite">token_cipher_suite</h1>
<ul>
  <li>Type: string</li>
  <li>Description: The cipher suite to sign the authenticated token.</li>
  <li>Default: <code>HS256</code></li>
</ul>

<p>Supported signing methods:</p>

<ul>
  <li>HS256</li>
</ul>

<h1 id="tokenexpirationtime">token_expiration_time</h1>

<ul>
  <li>Type: number</li>
  <li>Description: The number of seconds the token is valid before it expires.</li>
  <li>Default: <code>2592000</code> ~ 1 month</li>
</ul>

<h1 id="authtokenheadername">auth_token_header_name</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The name of the HTTP header that transports the authentication token.</li>
  <li>Default: <code>X-Auth-Token</code></li>
</ul>

<h1 id="authtokenqueryparamname">auth_token_query_param_name</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The name of the URL query parameter that transports the authentication token.</li>
  <li>Default: <code>x-auth-token</code></li>
</ul>

<h1 id="checksumheadername">checksum_header_name</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The name of the HTTP header that transports the checksum.</li>
  <li>Default: <code>X-Checksum</code></li>
</ul>

<p>The value of the header has the layout: <code>&lt;checksumtype&gt;:&lt;checksum&gt;</code>. Example: <code>md5:14af130a3c023c2d54881341c7cf1b1b</code></p>

<h1 id="checksumqueryparamname">checksum_query_param_name</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The name of the URL query parameter that transports the checksum.</li>
  <li>Default: <code>checksum</code></li>
</ul>

<p>The value of the query param has the layout: <code>&lt;checksumtype&gt;:&lt;checksum&gt;</code>. Example: <code>md5:14af130a3c023c2d54881341c7cf1b1b</code></p>

<h1 id="localstorageprefix">local_storage_prefix</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The prefix used for local storage.</li>
  <li>Default: <code>local</code></li>
</ul>

<h1 id="localstoragerootdatadir">local_storage_root_data_dir</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The path where user data will be stored.</li>
  <li>Default: <code>/home/clawiod/data/notmp</code></li>
</ul>

<h1 id="localstorageroottmpdir">local_storage_root_tmp_dir</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The path where temporary data will be stored.</li>
  <li>Default: <code>/home/clawiod/data/tmp</code></li>
</ul>

<h1 id="fileauthauthid">file_auth_auth_id</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The ID of this authentication strategy.</li>
  <li>Default: <code>fileauth</code></li>
</ul>

<h1 id="fileauthfilename">file_auth_filename</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The path of the JSON file containing the users.</li>
  <li>Default: <code>/etc/clawiod/conf.d/fileauth.conf</code></li>
</ul>

<h1 id="apiroot">api_root</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The prefix used for the api.</li>
  <li>Default: <code>/api/v1</code></li>
</ul>

<h1 id="authapienabled">auth_api_enabled</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: Enables or disables the <a href="/documentation/api/v1/auth">Auth API</a>.</li>
  <li>Default: <code>true</code></li>
</ul>

<h1 id="authapiid">auth_api_id</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The ID for the <a href="/documentation/api/v1/auth">Auth API</a>.</li>
  <li>Default: <code>auth</code></li>
</ul>

<h1 id="storageapienabled">storage_api_enabled</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: Enables or disables the <a href="/documentation/api/v1/storage">Storage API</a>.</li>
  <li>Default: <code>true</code></li>
</ul>

<h1 id="storageapiid">storage_api_id</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The ID for the <a href="/documentation/api/v1/storage">Storage API</a>.</li>
  <li>Default: <code>storage</code></li>
</ul>

<h1 id="webdavapienabled">webdav_api_enabled</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: Enables or disables the <a href="/documentation/api/v1/webdav">WebDAV API</a>.</li>
  <li>Default: <code>true</code></li>
</ul>

<h1 id="webdavapiid">webdav_api_id</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The ID for the <a href="/documentation/api/v1/webdav">WebDAV API</a>.</li>
  <li>Default: <code>webdav</code></li>
</ul>

<h1 id="staticapienabled">static_api_enabled</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: Enables or disables the <a href="/documentation/api/v1/static">Static API</a>.</li>
  <li>Default: <code>true</code></li>
</ul>

<h1 id="staticapiid">static_api_id</h1>

<ul>
  <li>Type: string</li>
  <li>Description: The ID for the <a href="/documentation/api/v1/static">Static API</a>.</li>
  <li>Default: <code>static</code></li>
</ul>

<h1 id="staticapiwithauthentication">static_api_with_authentication</h1>

<ul>
  <li>Type: boolean</li>
  <li>Description: If enabled the request must be authenticated.</li>
  <li>Default: <code>false</code></li>
</ul>

    </div>
  </div>
</div>


      <footer class="footer centered">
        <b>Copyright ClawIO 2015</b>
      </footer>
    </div>

    <script src="/js/anchor.min.js"></script>
    <script>
      var selector = '.markdown-body h2, .markdown-body h3';
      anchors.options = {
        placement: 'left',
        class: 'anchor-link'
      };
      anchors.add(selector);
    </script>
    <script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'UA-67279725-1', 'auto');
	  ga('send', 'pageview');
    </script>
  </body>
</html>
